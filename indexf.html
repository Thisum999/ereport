<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>MCG G10F - 2024 3rd Term Test E-Report</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Color Scheme */
    :root {
      --primary: #45a29e; /* Teal Green */
      --secondary: #6c757d; /* Grayish Blue */
      --accent: #f0ad4e; /* Orange */
      --success: #28a745; /* Green */
      --warning: #ffc107; /* Yellow */
      --info: #17a2b8; /* Cyan */
      --danger: #dc3545; /* Red */
      --light-gray: #f8f9fa;
      --white: #ffffff;
    }
    #rotate-message {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-family: Arial, sans-serif;
    }
    #rotate-logo {
      width: 24px; /* Adjust the size as needed */
      height: 24px; /* Adjust the size as needed */
      margin-right: 10px; /* Space between the logo and the text */
      animation: rotate 2s linear infinite; /* Rotate animation */
    }
    @keyframes rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: linear-gradient(135deg, var(--light-gray), #e9ecef);
      color: var(--secondary);
      line-height: 1.6;
      position: relative;
    }
    header {
      text-align: center;
      background: linear-gradient(135deg, var(--primary), #45a29e);
      color: var(--white);
      padding: 2rem 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    header h1 {
      font-family: 'Montserrat', sans-serif;
      font-size: 2rem;
      color: var(--accent);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    main {
      padding: 2rem 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    #search-section {
      text-align: center;
      margin-bottom: 2rem;
    }
    .search-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    #teacher-photo {
      width: 140px;
      height: 169px;
      border-radius: 5%;
      object-fit: cover;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    #admission-number {
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      width: 100%;
      max-width: 300px;
      border: 2px solid var(--primary);
      border-radius: 25px;
      background: var(--white);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    #search-btn {
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      background: linear-gradient(135deg, #f0ad4e, var(--accent));
      color: black;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    #report-section {
      display: none;
    }
    #place-rank{
      color: #dc3545;
    }
    #chart-container {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 1rem 0;
      position: relative;
    }
    #student-info {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    .info-card {
      text-align: center;
      padding: 1rem;
      border-radius: 10px;
      background: var(--light-gray);
      border: 2px solid var(--primary);
    }
    .info-card h3 {
      font-size: 1rem;
      color: var(--secondary);
      margin-bottom: 0.5rem;
    }
    .info-card p {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
    }
    #teacher{
      color: #ffffff;
    }
    .grade-distribution {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 1rem 0;
    }
    .grade-distribution h3 {
      font-size: 1.2rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    .grade-distribution .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      margin-right: 0.5rem;
      border-radius: 20px;
      color: black;
      font-weight: bold;
    }
    .grade-distribution .badge.success {
      background-color: var(--success);
    }
    .grade-distribution .badge.warning {
      background-color: var(--warning);
    }
    .grade-distribution .badge.info {
      background-color: var(--info);
    }
    .grade-distribution .badge.accent {
      background-color: var(--accent);
    }
    .grade-distribution .badge.danger {
      background-color: var(--danger);
    }
    .subject-marks {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .subject-marks .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      color: var(--white);
      font-weight: bold;
    }
    .subject-details {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .subject-details .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: var(--white);
      color: var(--secondary);
      margin-top: 2rem;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
    }
    @media (min-width: 768px) {
      header h1 { font-size: 2.5rem; }
      #admission-number { font-size: 1.1rem; }
      #search-btn { font-size: 1.1rem; }
      .info-card { padding: 1.5rem; }
    }
    #rotate-message {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      z-index: 1000;
    }
    #legend {
      position: absolute;
      top: 222px;
      right: 15px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 5px;
      border-radius: 5px;
      font-size: 0.8rem;
    }
    #legend div {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }
    #legend .color-box {
      width: 15px;
      height: 15px;
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>MCG Grade 10F - 2024 3rd Term Test E-Report</h1>
    <p id="teacher">Class Teacher: Mr. Yasas Darshana</p>
  </header>
  <main>
    <section id="search-section">
      <div class="search-container">
        <img src="https://i.ibb.co/TWLprNS/10F.jpg" id="teacher-photo" alt="Teacher Image">
        <div style="display: flex; flex-direction: column; gap: 1rem;">
          <input type="text" id="admission-number" placeholder="Enter Admission Number...">
          <button id="search-btn">
            <i class="fas fa-chart-line"></i> Generate Report
          </button>
        </div>
        <div id="legend">
          <div><span class="color-box" style="background-color: var(--success);"></span>A (75+)</div>
          <div><span class="color-box" style="background-color: var(--warning);"></span>B (60-74)</div>
          <div><span class="color-box" style="background-color: var(--info);"></span>C (45-59)</div>
          <div><span class="color-box" style="background-color: var(--accent);"></span>W (35-44)</div>
          <div><span class="color-box" style="background-color: var(--danger);"></span>S (Below 35)</div>
        </div>
      </div>
    </section>
    <section id="report-section">
      <div id="chart-container">
        <canvas id="marks-chart"></canvas>
      </div>
      <div id="student-info">
        <div class="info-card">
          <h3><i class="fas fa-user-graduate"></i> Student Name</h3>
          <p id="student-name">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-trophy"></i> Total Marks</h3>
          <p id="total-marks-display">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-medal"></i> Current Rank</h3>
          <p id="place-rank">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-percent"></i> Average Score</h3>
          <p id="average-marks">-</p>
        </div>
      </div>
      <div class="grade-distribution">
        <h3>Grade Distribution</h3>
        <div id="grade-distribution"></div>
      </div>
      <div class="subject-details" id="subject-details"></div>
    </section>
  </main>
  <footer>
    <p>Designed By<a href="https://wa.me/+94768846375">Thisum Jalitha Â©</a></p>
  </footer>
  <div id="rotate-message">
    <img src="https://i.ibb.co/mFTwkmd4/rotate-2313593.png" alt="Rotate Logo" id="rotate-logo">
    Rotate phone for best view
  </div> 
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.0.1"></script>
  <script>
    const studentsData = {
 "6668": {
    "name": "N.D.NIHINDA SESITHA",
    "place": 38,
    "marks": [39, 41, 16, 9, 55, 48, 71, 49, 47],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6669": {
    "name": "S.A.K.H.DINSARA",
    "place": 45,
    "marks": [40, 67, 19, 10, 34, 38, 64, 0, 0],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6672": {
    "name": "L.METHUKA MANHIRU",
    "place": 16,
    "marks": [77, 67, 65, 96, 88, 75, 81, 41, 70],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6674": {
    "name": "K.L.S. MATHEESHA",
    "place": 22,
    "marks": [66, 80, 63, 47, 81, 73, 68, 25, 86],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6675": {
    "name": "D. PANCHALA ANUHAS",
    "place": 36,
    "marks": [31, 35, 28, 34, 72, 47, 43, 47, 71],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6677": {
    "name": "M.H.DIDULA SASADARA",
    "place": 26,
    "marks": [65, 63, 47, 54, 65, 49, 56, 36, 73],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6679": {
    "name": "A.H.ASHEN CHATHURANGA",
    "place": 27,
    "marks": [59, 70, 26, 37, 78, 55, 73, 27, 69],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6682": {
    "name": "W.K.NETHIL SADIKA",
    "place": 18,
    "marks": [51, 84, 61, 77, 90, 62, 83, 67, 67],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6702": {
    "name": "B.H. SADEESHA RASHMIKA",
    "place": 32,
    "marks": [57, 71, 41, 43, 52, 47, 59, 27, 62],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6705": {
    "name": "L.M. SADEESHA NETHSARA",
    "place": 35,
    "marks": [48, 57, 46, 20, 44, 48, 48, 50, 63],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6708": {
    "name": "L.V.D. AMOD NEVINDA",
    "place": 28,
    "marks": [51, 64, 46, 9, 78, 51, 60, 61, 66],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6710": {
    "name": "L.V.D. CHAMOD RASHMIKA",
    "place": 31,
    "marks": [55, 72, 26, 23, 46, 56, 73, 63, 57],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6714": {
    "name": "OMESH RANDINU MALALAGODA",
    "place": 41,
    "marks": [44, 28, 38, 26, 58, 26, 31, 43, 43],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6733": {
    "name": "W.W. SADALU YASHINTHA",
    "place": 34,
    "marks": [47, 63, 36, 35, 53, 50, 62, 37, 43],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6734": {
    "name": "D.A.I. YASHAN KALHARA",
    "place": 46,
    "marks": [31, 48, 26, 12, 39, 38, 0, 0, 0],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6736": {
    "name": "B.RASHMIKA SANKALANA",
    "place": 47,
    "marks": [8, 25, 11, 1, 7, 30, 32, 20, 25],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6739": {
    "name": "D.G. NOMIN YUTHMIKA",
    "place": 42,
    "marks": [36, 47, 35, 38, 44, 47, 23, 63, 0],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6741": {
    "name": "K.P. THARUKA SANDEEPA",
    "place": 44,
    "marks": [39, 25, 22, 26, 46, 36, 48, 0, 38],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6746": {
    "name": "B.A.U.C. MAHENDRA",
    "place": 25,
    "marks": [60, 42, 45, 44, 85, 54, 51, 84, 49],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6755": {
    "name": "A.G.DULESH SAHANSA",
    "place": 12,
    "marks": [76, 84, 85, 78, 80, 76, 80, 55, 82],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6763": {
    "name": "K.G.D. SEWHAS",
    "place": 29,
    "marks": [67, 66, 51, 39, 77, 67, 31, 30, 57],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6787": {
    "name": "T.W.B. MANOMITHA",
    "place": 21,
    "marks": [49, 88, 40, 85, 76, 70, 91, 16, 86],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6813": {
    "name": "M.D. JEROM SHAMIKA",
    "place": 33,
    "marks": [50, 80, 36, 48, 53, 53, 24, 47, 54],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6820": {
    "name": "K.KISANDU JAYAWICKRAMA",
    "place": 13,
    "marks": [60, 87, 64, 89, 91, 71, 85, 75, 57],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6830": {
    "name": "H.H.RASIKA NETHVIRU",
    "place": 40,
    "marks": [24, 53, 49, 7, 61, 53, 78, 1, 29],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6831": {
    "name": "D.K.S.INDUWARA",
    "place": 23,
    "marks": [53, 70, 60, 36, 70, 71, 79, 58, 66],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6834": {
    "name": "S.K.A. PRABASHWARA",
    "place": 43,
    "marks": [34, 60, 21, 10, 52, 28, 30, 24, 50],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6853": {
    "name": "E.P. CHETHANA DE SOYSA",
    "place": 10,
    "marks": [78, 87, 78, 88, 78, 85, 83, 52, 83],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6854": {
    "name": "N.K. OMITH DAMNUJA",
    "place": 48,
    "marks": [18, 25, 0, 5, 19, 11, 20, 12, 19],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6857": {
    "name": "H.V.T.Y. DAMHIRU",
    "place": 37,
    "marks": [36, 40, 43, 11, 72, 53, 62, 36, 53],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6858": {
    "name": "D.S. GAJANAYAKA",
    "place": 20,
    "marks": [65, 75, 56, 33, 88, 64, 86, 66, 79],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"6919": {
    "name": "O.H.S. USUGAMPALA",
    "place": 30,
    "marks": [66, 60, 46, 61, 33, 41, 74, 36, 66],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"8267": {
    "name": "W.M.S. SANDES",
    "place": 11,
    "marks": [68, 95, 85, 88, 86, 76, 68, 45, 90],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"8979": {
    "name": "E.A.M. PANSILU DE SILVA",
    "place": 4,
    "marks": [86, 98, 88, 93, 94, 91, 77, 84, 78],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"8980": {
    "name": "K.D. HIMASHA CHAMUDITH",
    "place": 6,
    "marks": [79, 85, 83, 91, 92, 83, 99, 84, 81],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"8983": {
    "name": "K.K.C. KAVITHRA",
    "place": 17,
    "marks": [67, 92, 56, 77, 79, 71, 62, 75, 69],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"8992": {
    "name": "H.K.A. DEWMIKA",
    "place": 2,
    "marks": [91, 100, 90, 98, 92, 97, 92, 97, 84],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9001": {
    "name": "W. ANUGA VIHAS",
    "place": 1,
    "marks": [97, 100, 97, 98, 96, 95, 95, 86, 94],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9002": {
    "name": "R. RANMINA WELLALA",
    "place": 3,
    "marks": [84, 98, 90, 90, 88, 92, 94, 63, 93],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9013": {
    "name": "G.H.P.A.W. PIYUMAL",
    "place": 9,
    "marks": [78, 79, 77, 95, 94, 75, 92, 65, 86],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9015": {
    "name": "V.L. SAMARASEKARA",
    "place": 8,
    "marks": [84, 91, 90, 84, 91, 84, 88, 65, 68],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9017": {
    "name": "A.V.K. THARUMINA",
    "place": 5,
    "marks": [80, 95, 81, 86, 88, 94, 89, 79, 86],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9247": {
    "name": "N.Y.YONAL",
    "place": 7,
    "marks": [74, 96, 88, 96, 94, 82, 88, 76, 71],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9328": {
    "name": "M.H. RUSIRU VIHANGA",
    "place": 14,
    "marks": [78, 97, 87, 82, 89, 87, 91, 59, 670],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9498": {
    "name": "K.V. MALITHA MADUSHAN",
    "place": 19,
    "marks": [76, 76, 71, 83, 78, 69, 74, 34, 67],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9707": {
    "name": "RANDUL DE SOYSA",
    "place": 39,
    "marks": [47, 74, 30, 21, 47, 51, 58, 0, 46],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
},
"9708": {
    "name": "Rithija Gethmika",
    "place": 24,
    "marks": [65, 80, 67, 53, 68, 66, 60, 35, 56],
    "subjects": ["Sinhala", "Religion", "Science", "Maths", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
}
  // Add more student information here...
};

    document.getElementById("search-btn").addEventListener("click", searchStudent);
    document.getElementById("admission-number").addEventListener("keypress", (e) => {
      if (e.key === "Enter") searchStudent();
    });

    function searchStudent() {
      const admissionNumber = document.getElementById("admission-number").value;
      const student = studentsData[admissionNumber];
      if (student) {
        const totalMarks = student.marks.reduce((a, b) => a + b, 0);
        const averageMarks = (totalMarks / student.marks.length).toFixed(2);
        const totalStudents = Object.keys(studentsData).length;
        document.getElementById("student-name").textContent = student.name;
        document.getElementById("total-marks-display").textContent = totalMarks;
        document.getElementById("place-rank").textContent = `#${student.place} (out of ${totalStudents})`;
        document.getElementById("average-marks").textContent = `${averageMarks}%`;
        initChart(student);
        updateGradeDistribution(student);
        updateSubjectDetails(student);
        document.getElementById("report-section").style.display = "block";
      } else {
        alert("Student not found! Please check admission number.");
      }
    }

    function initChart(student) {
          const ctx = document.getElementById('marks-chart').getContext('2d');
          const isMobile = window.innerWidth <= 768;

          // Retrieve CSS variables properly
          const styles = getComputedStyle(document.documentElement);
          const successColor = styles.getPropertyValue('--success').trim();
          const warningColor = styles.getPropertyValue('--warning').trim();
          const infoColor = styles.getPropertyValue('--info').trim();
          const accentColor = styles.getPropertyValue('--accent').trim();
          const dangerColor = styles.getPropertyValue('--danger').trim();

          if (window.myChart) window.myChart.destroy();
          window.myChart = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: student.subjects.map((subject, index) => `${subject} (${student.marks[index]})`),
              datasets: [{
                data: student.marks,
                backgroundColor: student.marks.map(m => 
                  m >= 75 ? successColor : 
                  m >= 60 ? warningColor : 
                  m >= 45 ? infoColor : 
                  m >= 35 ? accentColor : dangerColor
                ),
                borderColor: '#2c3e50',
                borderWidth: 2,
                borderRadius: 5
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true,
                  max: 100,
                  grid: { color: '#dfe6e9' },
                  ticks: { color: '#2c3e50', font: { size: isMobile ? 12 : 14 } }
                },
                x: {
                  grid: { display: false },
                  ticks: {
                    color: '#2c3e50',
                    font: { size: isMobile ? 10 : 12 },
                    autoSkip: false,
                    maxRotation: isMobile ? 90 : 0,
                    minRotation: isMobile ? 90 : 0
                  }
                }
              },
              plugins: {
                legend: { display: false },
                annotation: {
                  annotations: {
                    passLine: {
                      type: 'line',
                      yMin: 35,
                      yMax: 35,
                      borderColor: '#e74c3c',
                      borderWidth: 3,
                      borderDash: [5, 3],
                      label: {
                        content: 'Pass (35)',
                        display: true,
                        position: 'end',
                        backgroundColor: '#e74c3c',
                        color: 'white'
                      }
                    },
                    distinctionLine: {
                      type: 'line',
                      yMin: 75,
                      yMax: 75,
                      borderColor: '#FFD700',
                      borderWidth: 3,
                      borderDash: [5, 3],
                      label: {
                        content: 'Distinction (75)',
                        display: true,
                        position: 'end',
                        backgroundColor: '#FFD700',
                        color: '#2c3e50'
                      }
                    }
                  }
                }
              }
            }
          });
        }

        function updateGradeDistribution(student) {
          const gradeCounts = { A: 0, B: 0, C: 0, W: 0, S: 0 };
          student.marks.forEach(mark => {
            if (mark >= 75) gradeCounts.A++;
            else if (mark >= 60) gradeCounts.B++;
            else if (mark >= 45) gradeCounts.C++;
            else if (mark >= 35) gradeCounts.W++;
            else gradeCounts.S++;
          });
          const gradeDistributionDiv = document.getElementById("grade-distribution");
          gradeDistributionDiv.innerHTML = `
            ${gradeCounts.A > 0 ? `<span class="badge success">A: ${gradeCounts.A}</span>` : ''}
            ${gradeCounts.B > 0 ? `<span class="badge warning">B: ${gradeCounts.B}</span>` : ''}
            ${gradeCounts.C > 0 ? `<span class="badge info">C: ${gradeCounts.C}</span>` : ''}
            ${gradeCounts.W > 0 ? `<span class="badge accent">W: ${gradeCounts.W}</span>` : ''}
            ${gradeCounts.S > 0 ? `<span class="badge danger">S: ${gradeCounts.S}</span>` : ''}
          `;
        }

        function updateSubjectDetails(student) {
          const subjectDetailsDiv = document.getElementById("subject-details");
          subjectDetailsDiv.innerHTML = "";
          student.marks.forEach((mark, index) => {
            let badgeClass = '';
            if (mark >= 75) badgeClass = 'success';
            else if (mark >= 60) badgeClass = 'warning';
            else if (mark >= 45) badgeClass = 'info';
            else if (mark >= 35) badgeClass = 'accent';
            else badgeClass = 'danger';
            const subjectBadge = document.createElement("span");
            subjectBadge.className = `badge ${badgeClass}`;
            subjectBadge.textContent = `${student.subjects[index]}: ${mark}`;
            subjectDetailsDiv.appendChild(subjectBadge);
          });
        }
      </script>
    </body>
</html>