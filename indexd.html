<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>MCG G10D - 2024 3rd Term Test E-Report</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Color Scheme */
    :root {
      --primary: #45a29e; /* Teal Green */
      --secondary: #6c757d; /* Grayish Blue */
      --accent: #f0ad4e; /* Orange */
      --success: #28a745; /* Green */
      --warning: #ffc107; /* Yellow */
      --info: #17a2b8; /* Cyan */
      --danger: #dc3545; /* Red */
      --light-gray: #f8f9fa;
      --white: #ffffff;
    }
    #rotate-message {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-family: Arial, sans-serif;
    }
    #rotate-logo {
      width: 24px; /* Adjust the size as needed */
      height: 24px; /* Adjust the size as needed */
      margin-right: 10px; /* Space between the logo and the text */
      animation: rotate 2s linear infinite; /* Rotate animation */
    }
    @keyframes rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: linear-gradient(135deg, var(--light-gray), #e9ecef);
      color: var(--secondary);
      line-height: 1.6;
      position: relative;
    }
    header {
      text-align: center;
      background: linear-gradient(135deg, var(--primary), #45a29e);
      color: var(--white);
      padding: 2rem 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    header h1 {
      font-family: 'Montserrat', sans-serif;
      font-size: 2rem;
      color: var(--accent);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    main {
      padding: 2rem 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    #search-section {
      text-align: center;
      margin-bottom: 2rem;
    }
    .search-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    #teacher-photo {
      width: 140px;
      height: 174px;
      border-radius: 5%;
      object-fit: cover;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    #admission-number {
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      width: 100%;
      max-width: 300px;
      border: 2px solid var(--primary);
      border-radius: 25px;
      background: var(--white);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    #search-btn {
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      background: linear-gradient(135deg, #f0ad4e, var(--accent));
      color: black;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    #report-section {
      display: none;
    }
    #place-rank{
      color: #dc3545;
    }
    #chart-container {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 1rem 0;
      position: relative;
    }
    #student-info {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    .info-card {
      text-align: center;
      padding: 1rem;
      border-radius: 10px;
      background: var(--light-gray);
      border: 2px solid var(--primary);
    }
    .info-card h3 {
      font-size: 1rem;
      color: var(--secondary);
      margin-bottom: 0.5rem;
    }
    .info-card p {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
    }
    #teacher{
      color: #ffffff;
    }
    .grade-distribution {
      background: var(--white);
      padding: 1rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 1rem 0;
    }
    .grade-distribution h3 {
      font-size: 1.2rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    .grade-distribution .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      margin-right: 0.5rem;
      border-radius: 20px;
      color: black;
      font-weight: bold;
    }
    .grade-distribution .badge.success {
      background-color: var(--success);
    }
    .grade-distribution .badge.warning {
      background-color: var(--warning);
    }
    .grade-distribution .badge.info {
      background-color: var(--info);
    }
    .grade-distribution .badge.accent {
      background-color: var(--accent);
    }
    .grade-distribution .badge.danger {
      background-color: var(--danger);
    }
    .subject-marks {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .subject-marks .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      color: var(--white);
      font-weight: bold;
    }
    .subject-details {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .subject-details .badge {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: var(--white);
      color: var(--secondary);
      margin-top: 2rem;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
    }
    @media (min-width: 768px) {
      header h1 { font-size: 2.5rem; }
      #admission-number { font-size: 1.1rem; }
      #search-btn { font-size: 1.1rem; }
      .info-card { padding: 1.5rem; }
    }
    #rotate-message {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      z-index: 1000;
    }
    #legend {
      position: absolute;
      top: 222px;
      right: 15px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 5px;
      border-radius: 5px;
      font-size: 0.8rem;
    }
    #legend div {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }
    #legend .color-box {
      width: 15px;
      height: 15px;
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>MCG Grade 10D - 2024 3rd Term Test E-Report</h1>
    <p id="teacher">Class Teacher: Mrs. Amali Udayangi</p>
  </header>
  <main>
    <section id="search-section">
      <div class="search-container">
        <img src="https://i.ibb.co/NrFccJ8/10D.png" id="teacher-photo" alt="Teacher Image">
        <div style="display: flex; flex-direction: column; gap: 1rem;">
          <input type="text" id="admission-number" placeholder="Enter Admission Number...">
          <button id="search-btn">
            <i class="fas fa-chart-line"></i> Generate Report
          </button>
        </div>
        <div id="legend">
          <div><span class="color-box" style="background-color: var(--success);"></span>A (75+)</div>
          <div><span class="color-box" style="background-color: var(--warning);"></span>B (60-74)</div>
          <div><span class="color-box" style="background-color: var(--info);"></span>C (45-59)</div>
          <div><span class="color-box" style="background-color: var(--accent);"></span>W (35-44)</div>
          <div><span class="color-box" style="background-color: var(--danger);"></span>S (Below 35)</div>
        </div>
      </div>
    </section>
    <section id="report-section">
      <div id="chart-container">
        <canvas id="marks-chart"></canvas>
      </div>
      <div id="student-info">
        <div class="info-card">
          <h3><i class="fas fa-user-graduate"></i> Student Name</h3>
          <p id="student-name">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-trophy"></i> Total Marks</h3>
          <p id="total-marks-display">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-medal"></i> Current Rank</h3>
          <p id="place-rank">-</p>
        </div>
        <div class="info-card">
          <h3><i class="fas fa-percent"></i> Average Score</h3>
          <p id="average-marks">-</p>
        </div>
      </div>
      <div class="grade-distribution">
        <h3>Grade Distribution</h3>
        <div id="grade-distribution"></div>
      </div>
      <div class="subject-details" id="subject-details"></div>
    </section>
  </main>
  <footer>
    <p>Designed By<a href="https://wa.me/+94768846375">Thisum Jalitha Â©</a></p>
  </footer>
  <div id="rotate-message">
    <img src="https://i.ibb.co/mFTwkmd4/rotate-2313593.png" alt="Rotate Logo" id="rotate-logo">
    Rotate phone for best view
  </div> 
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.0.1"></script>
  <script>
    const studentsData = {
 "6662": {
    "name": "Romindu Tharaka Munasinghe",
    "place": 25,
    "marks": [38, 45, 44, 59, 91, 37, 63, 72, 70],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6665": {
    "name": "K.L.W.Senura Dulmika",
    "place": 47,
    "marks": [27, 32, 18, 53, 58, 30, 10, 0, 0],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6671": {
    "name": "K.A.Abiru Dewsara",
    "place": 43,
    "marks": [23, 31, 16, 62, 63, 36, 22, 18, 27],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6676": {
    "name": "M.A.Tharusha Kavishan",
    "place": 18,
    "marks": [77, 73, 43, 64, 81, 60, 87, 32, 51],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6681": {
    "name": "Sasindu Sehansa Ranasinghe",
    "place": 38,
    "marks": [38, 38, 16, 48, 34, 33, 33, 53, 71],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6684": {
    "name": "E.A.Dasiru Boditha",
    "place": 2,
    "marks": [90, 90, 95, 95, 97, 92, 90, 79, 92],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6688": {
    "name": "R.M.T.Senuth Rajapaksha",
    "place": 35,
    "marks": [41, 31, 19, 66, 62, 41, 57, 35, 63],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6689": {
    "name": "A.D.S.Aksen Sandayuru",
    "place": 26,
    "marks": [43, 66, 59, 48, 72, 66, 65, 35, 49],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6707": {
    "name": "N.A.Kanishka Vishwadinu",
    "place": 23,
    "marks": [68, 70, 27, 48, 58, 57, 65, 51, 81],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6717": {
    "name": "P.L.Sethum Sethvin",
    "place": 16,
    "marks": [54, 61, 71, 74, 86, 57, 78, 67, 36],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6718": {
    "name": "A.B.Sandika Sathsilu",
    "place": 7,
    "marks": [83, 78, 65, 87, 77, 86, 76, 60, 84],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6719": {
    "name": "D.Videw Mindula",
    "place": 14,
    "marks": [72, 66, 53, 71, 78, 74, 98, 23, 71],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6720": {
    "name": "A.K.Methuka Tharuk",
    "place": 29,
    "marks": [39, 52, 45, 47, 65, 47, 69, 59, 50],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6730": {
    "name": "A.P.Janindu Nimsara",
    "place": 8,
    "marks": [78, 82, 77, 85, 78, 84, 68, 70, 67],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6735": {
    "name": "U.D.Yashod Sandesh",
    "place": 4,
    "marks": [82, 86, 86, 81, 88, 76, 96, 84, 85],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6741": {
    "name": "D.S.D.Gunasekara",
    "place": 50,
    "marks": [13, 30, 9, 27, 16, 23, 20, 11, 16],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6759": {
    "name": "M.H.Eshan Raveen",
    "place": 41,
    "marks": [24, 32, 17, 39, 57, 22, 43, 54, 35],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6761": {
    "name": "H.P.Thinuka Hirun",
    "place": 42,
    "marks": [33, 29, 17, 36, 52, 30, 22, 18, 62],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6762": {
    "name": "Amath Hansaja Pathirana",
    "place": 27,
    "marks": [43, 40, 47, 64, 57, 56, 60, 46, 83],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6765": {
    "name": "K.L.Geeneth Sasvindu",
    "place": 17,
    "marks": [66, 54, 74, 65, 89, 57, 51, 67, 48],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6772": {
    "name": "K.L.D.Senuth Dinsara",
    "place": 45,
    "marks": [29, 30, 15, 28, 33, 42, 29, 20, 40],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6773": {
    "name": "B.G.Nethum Nethsara",
    "place": 37,
    "marks": [23, 51, 44, 52, 58, 30, 42, 41, 43],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6778": {
    "name": "U.S.Sathika Himansana",
    "place": 24,
    "marks": [55, 56, 64, 52, 80, 59, 26, 80, 51],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6782": {
    "name": "U.G.Chathil Kariyawasam",
    "place": 28,
    "marks": [47, 54, 41, 56, 83, 66, 22, 61, 44],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6786": {
    "name": "I.Manitha Rajapakshe",
    "place": 51,
    "marks": [0, 30, 0, 36, 0, 38, 40, 0, 0],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6788": {
    "name": "D.S.H.Imal Tharushika",
    "place": 32,
    "marks": [62, 51, 39, 40, 62, 56, 25, 62, 52],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6790": {
    "name": "D.Thejitha Gamage",
    "place": 40,
    "marks": [50, 32, 14, 53, 42, 47, 33, 26, 32],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6796": {
    "name": "Adil Rankindu Pasqual",
    "place": 44,
    "marks": [18, 40, 25, 36, 36, 25, 19, 43, 40],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6809": {
    "name": "R.H.Sithum Dulmira",
    "place": 22,
    "marks": [52, 60, 46, 34, 70, 69, 73, 69, 53],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6821": {
    "name": "D.B.Minuka Hiranya",
    "place": 31,
    "marks": [57, 34, 24, 49, 65, 60, 58, 43, 65],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6822": {
    "name": "A.H.Senura Jayashan",
    "place": 39,
    "marks": [28, 39, 9, 27, 40, 34, 53, 65, 43],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6824": {
    "name": "N.H.W.N.Sashin Jayathunge",
    "place": 10,
    "marks": [70, 58, 84, 71, 88, 59, 94, 62, 75],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6826": {
    "name": "A.V.Umayanga Malinda",
    "place": 33,
    "marks": [31, 52, 49, 58, 61, 44, 37, 53, 63],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6836": {
    "name": "B.G.Lakindu Nethsara",
    "place": 20,
    "marks": [57, 64, 40, 70, 61, 65, 73, 60, 64],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6838": {
    "name": "Pamod De Soyza",
    "place": 34,
    "marks": [49, 52, 13, 43, 46, 65, 44, 53, 82],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6850": {
    "name": "D.K.S.Sandaruwan De Silva",
    "place": 36,
    "marks": [36, 51, 28, 42, 45, 46, 51, 53, 61],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6852": {
    "name": "K.A.Chandupa Abhiman",
    "place": 13,
    "marks": [75, 72, 47, 63, 59, 84, 70, 64, 74],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6862": {
    "name": "A.G.Achintha Dewmina",
    "place": 11,
    "marks": [83, 68, 64, 69, 83, 86, 76, 62, 69],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6864": {
    "name": "H.K.Shrayan Patalie",
    "place": 30,
    "marks": [59, 38, 35, 56, 65, 66, 46, 34, 64],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "6924": {
    "name": "N.P.T.Nihindu Channula",
    "place": 9,
    "marks": [75, 63, 40, 83, 80, 61, 91, 86, 91],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  
  "7282": {
    "name": "T.G.Vinuja Nethmin",
    "place": 6,
    "marks": [84, 80, 82, 82, 93, 81, 79, 77, 73],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "8959": {
    "name": "H.M.Chanthuka Muthumala",
    "place": 15,
    "marks": [49, 61, 79, 71, 57, 62, 71, 75, 77],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "8971": {
    "name": "L.G.Thasmitha Dinethmin",
    "place": 21,
    "marks": [58, 56, 48, 54, 82, 63, 65, 41, 71],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "8978": {
    "name": "H.A.Vinuk Senitha",
    "place": 1,
    "marks": [99, 92, 100, 98, 98, 99, 98, 96, 96],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "8999": {
    "name": "B.G.Sinura Sasvidu",
    "place": 3,
    "marks": [86, 88, 96, 76, 90, 93, 96, 91, 88],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "9242": {
    "name": "K.G.Nethula Mandil",
    "place": 5,
    "marks": [78, 75, 82, 78, 87, 80, 86, 91, 76],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "9244": {
    "name": "J.L.Thujan Venuja",
    "place": 19,
    "marks": [63, 60, 50, 63, 85, 77, 38, 60, 68],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "9499": {
    "name": "Desindu Sri Jayanula",
    "place": 46,
    "marks": [18, 33, 17, 25, 45, 44, 0, 17, 44],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "9711": {
    "name": "M.H.Induwara Dineth",
    "place": 49,
    "marks": [13, 14, 2, 11, 59, 20, 21, 12, 16],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "9994": {
    "name": "M.Kavindu Hansaka",
    "place": 48,
    "marks": [19, 15, 10, 24, 22, 40, 12, 25, 22],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  },
  "10306": {
    "name": "G.Vonal Isira Sampath",
    "place": 12,
    "marks": [80, 72, 37, 65, 52, 69, 95, 85, 68],
    "subjects": ["Religon", "Sinhala", "Maths", "Science", "English", "History", "OPT 1", "OPT 2", "OPT 3"]
  }
  // Add more student information here...
};

    document.getElementById("search-btn").addEventListener("click", searchStudent);
    document.getElementById("admission-number").addEventListener("keypress", (e) => {
      if (e.key === "Enter") searchStudent();
    });

    function searchStudent() {
      const admissionNumber = document.getElementById("admission-number").value;
      const student = studentsData[admissionNumber];
      if (student) {
        const totalMarks = student.marks.reduce((a, b) => a + b, 0);
        const averageMarks = (totalMarks / student.marks.length).toFixed(2);
        const totalStudents = Object.keys(studentsData).length;
        document.getElementById("student-name").textContent = student.name;
        document.getElementById("total-marks-display").textContent = totalMarks;
        document.getElementById("place-rank").textContent = `#${student.place} (out of ${totalStudents})`;
        document.getElementById("average-marks").textContent = `${averageMarks}%`;
        initChart(student);
        updateGradeDistribution(student);
        updateSubjectDetails(student);
        document.getElementById("report-section").style.display = "block";
      } else {
        alert("Student not found! Please check admission number.");
      }
    }

    function initChart(student) {
          const ctx = document.getElementById('marks-chart').getContext('2d');
          const isMobile = window.innerWidth <= 768;

          // Retrieve CSS variables properly
          const styles = getComputedStyle(document.documentElement);
          const successColor = styles.getPropertyValue('--success').trim();
          const warningColor = styles.getPropertyValue('--warning').trim();
          const infoColor = styles.getPropertyValue('--info').trim();
          const accentColor = styles.getPropertyValue('--accent').trim();
          const dangerColor = styles.getPropertyValue('--danger').trim();

          if (window.myChart) window.myChart.destroy();
          window.myChart = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: student.subjects.map((subject, index) => `${subject} (${student.marks[index]})`),
              datasets: [{
                data: student.marks,
                backgroundColor: student.marks.map(m => 
                  m >= 75 ? successColor : 
                  m >= 60 ? warningColor : 
                  m >= 45 ? infoColor : 
                  m >= 35 ? accentColor : dangerColor
                ),
                borderColor: '#2c3e50',
                borderWidth: 2,
                borderRadius: 5
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true,
                  max: 100,
                  grid: { color: '#dfe6e9' },
                  ticks: { color: '#2c3e50', font: { size: isMobile ? 12 : 14 } }
                },
                x: {
                  grid: { display: false },
                  ticks: {
                    color: '#2c3e50',
                    font: { size: isMobile ? 10 : 12 },
                    autoSkip: false,
                    maxRotation: isMobile ? 90 : 0,
                    minRotation: isMobile ? 90 : 0
                  }
                }
              },
              plugins: {
                legend: { display: false },
                annotation: {
                  annotations: {
                    passLine: {
                      type: 'line',
                      yMin: 35,
                      yMax: 35,
                      borderColor: '#e74c3c',
                      borderWidth: 3,
                      borderDash: [5, 3],
                      label: {
                        content: 'Pass (35)',
                        display: true,
                        position: 'end',
                        backgroundColor: '#e74c3c',
                        color: 'white'
                      }
                    },
                    distinctionLine: {
                      type: 'line',
                      yMin: 75,
                      yMax: 75,
                      borderColor: '#FFD700',
                      borderWidth: 3,
                      borderDash: [5, 3],
                      label: {
                        content: 'Distinction (75)',
                        display: true,
                        position: 'end',
                        backgroundColor: '#FFD700',
                        color: '#2c3e50'
                      }
                    }
                  }
                }
              }
            }
          });
        }

        function updateGradeDistribution(student) {
          const gradeCounts = { A: 0, B: 0, C: 0, W: 0, S: 0 };
          student.marks.forEach(mark => {
            if (mark >= 75) gradeCounts.A++;
            else if (mark >= 60) gradeCounts.B++;
            else if (mark >= 45) gradeCounts.C++;
            else if (mark >= 35) gradeCounts.W++;
            else gradeCounts.S++;
          });
          const gradeDistributionDiv = document.getElementById("grade-distribution");
          gradeDistributionDiv.innerHTML = `
            ${gradeCounts.A > 0 ? `<span class="badge success">A: ${gradeCounts.A}</span>` : ''}
            ${gradeCounts.B > 0 ? `<span class="badge warning">B: ${gradeCounts.B}</span>` : ''}
            ${gradeCounts.C > 0 ? `<span class="badge info">C: ${gradeCounts.C}</span>` : ''}
            ${gradeCounts.W > 0 ? `<span class="badge accent">W: ${gradeCounts.W}</span>` : ''}
            ${gradeCounts.S > 0 ? `<span class="badge danger">S: ${gradeCounts.S}</span>` : ''}
          `;
        }

        function updateSubjectDetails(student) {
          const subjectDetailsDiv = document.getElementById("subject-details");
          subjectDetailsDiv.innerHTML = "";
          student.marks.forEach((mark, index) => {
            let badgeClass = '';
            if (mark >= 75) badgeClass = 'success';
            else if (mark >= 60) badgeClass = 'warning';
            else if (mark >= 45) badgeClass = 'info';
            else if (mark >= 35) badgeClass = 'accent';
            else badgeClass = 'danger';
            const subjectBadge = document.createElement("span");
            subjectBadge.className = `badge ${badgeClass}`;
            subjectBadge.textContent = `${student.subjects[index]}: ${mark}`;
            subjectDetailsDiv.appendChild(subjectBadge);
          });
        }
      </script>
    </body>
</html>
